{% load static %}
{% load i18n %}

<!-- div class="grid-x" -->
<div class="cell show-for-medium medium-4 large-3"><a href="{% url "web:main" %}"><img src="{% static "images/sopds_logo.gif" %}"></a></div>

<div class="cell small-12 medium-8 large-9">
  <form method="get" action="{% url "web:searchbooks" %}" id="searchform" data-abide>
  {% csrf_token %}
    <div class="input-group button-group">  
		<input class="input-group-field" type="search" name="searchterms" placeholder="Search" id="main_searchbox" data-validator="check_search" required >

		<div class="input-group-button">
		      <button class="button" type="submit" data-close="search-dropdown" name="submit_form" style="margin:1">{% trans "Search" %}</button>	   
		      <a class="dropdown button sopds-arrow-only align-self-middle" data-toggle="search-dropdown" ></a>
		</div>

		<input type="hidden" name="page" value="0">		
	</div>
    <label class="form-error" data-form-error-for="main_searchbox">{% trans "Please, fill the field" %}</label>  
			
	<div class="dropdown-pane" data-position="bottom" data-aligement="right" id="search-dropdown" data-dropdown>
	  <div class="row">
	  <fieldset class="large-12 columns">
	    <legend>{% trans "Choose Search Type:" %}</legend>
	    <input type="radio" name="searchtype" value="m" id="title" data-text="{% trans "Search by name" %}" onClick="SetSearch()" {% if searchobject == "title" or not searchobject %}checked{%endif%}><label for="title">{% trans "Title" %}</label>
	    <input type="radio" name="searchtype" value="m" id="author" data-text="{% trans "Search by author" %}" onClick="SetSearch()" {% if searchobject == "author" %}checked{%endif%}><label for="author">{% trans "Author" %}</label>
	    <input type="radio" name="searchtype" value="m" id="series" data-text="{% trans "Search by series" %}" onClick="SetSearch()" {% if searchobject == "series" %}checked{%endif%}><label for="series">{% trans "Series" %}</label>
	  </fieldset>
	  </div>
	</div>	
	 		    
  </form>
  
  </div>
<!--/div -->
  <script>    	
	function SetSearch() {
	    var searchtype = $("input[name='searchtype']:radio:checked").attr("id");
        var placeholder = $("input[name='searchtype']:radio:checked").attr("data-text"); 
        $('#main_searchbox').attr( "placeholder", placeholder);
        if (searchtype == "title") $('#searchform').attr( "action","{% url "web:searchbooks" %}");
        if (searchtype == "author") $('#searchform').attr( "action","{% url "web:searchauthors" %}");
        if (searchtype == "series") $('#searchform').attr( "action","{% url "web:searchseries" %}");

        $('#search-dropdown').foundation('close');         
	}	   
  </script>
  
